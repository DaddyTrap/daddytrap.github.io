---
layout: post
title: 系统分析与设计 第五次作业(lesson7)
subtitle:
author: DaddyTrap
date: 2018-04-29 18:39:17 +0800
categories: Homework SAD
---

## 领域模型

<!-- more -->

### 阅读 Asg_RH 文档，按用例构建领域模型。

![](/assets/sad-5/hotel-domain.png)

### 数据库建模(E-R 模型)

![](/assets/sad-5/hotel-er.png)

#### 生成代码

```sql
-- MySQL Script generated by MySQL Workbench
-- Sun Apr 29 18:45:46 2018
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `mydb` DEFAULT CHARACTER SET utf8 ;
USE `mydb` ;

-- -----------------------------------------------------
-- Table `mydb`.`hotel`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`hotel` (
  `id` INT NOT NULL,
  `name` VARCHAR(45) NULL,
  `location` VARCHAR(45) NULL,
  `minstay` INT NULL,
  `price` DOUBLE NULL,
  `rating` FLOAT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`room`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`room` (
  `id` INT NOT NULL,
  `hotel_id` INT NULL,
  `price` DOUBLE NULL,
  `room_type` VARCHAR(45) NULL,
  PRIMARY KEY (`id`),
  INDEX `hotel_id_idx` (`hotel_id` ASC),
  CONSTRAINT `hotel_id`
    FOREIGN KEY (`hotel_id`)
    REFERENCES `mydb`.`hotel` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`reservation_detail`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`reservation_detail` (
  `id` INT NOT NULL,
  `name` VARCHAR(45) NULL,
  `email` VARCHAR(45) NULL,
  `special_requirements` VARCHAR(200) NULL,
  `smoking` TINYINT NULL,
  `adult_count` INT NULL,
  `children_count` INT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`reservation`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`reservation` (
  `hotel_id` INT NOT NULL,
  `res_detail_id` INT NOT NULL,
  `check_in_date` DATE NULL,
  `check_out_date` DATE NULL,
  INDEX `for_res_detail_id_idx` (`res_detail_id` ASC),
  CONSTRAINT `for_hotel_id`
    FOREIGN KEY (`hotel_id`)
    REFERENCES `mydb`.`hotel` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `for_res_detail_id`
    FOREIGN KEY (`res_detail_id`)
    REFERENCES `mydb`.`reservation_detail` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

```

#### 领域模型、ER模型异同

异：领域模型偏向于一种对用例的概念的描述，即没有具体到实际开发时所需要的属性；ER模型会明确用例中各种实体在数据库中如何存储，其关系在数据库中如何表现

同：两种模型的作用都在于用图示清晰表示实体所具有的属性、实体之间的联系