<html>
  <head>
    <meta charset="UTF-8">
    <title>FFXIV 经验计算器</title>
  </head>
  <body>
    <div>
      <div>当前等级: <input type="text" id="cur_lv"></div>
      <div>现有经验: <input type="text" id="cur_exp"></div>
      <div>目标等级: <input type="text" id="target_lv"></div>
      <div><input type="button" value="计算" id="cal"> <span id="result"></span></div>
    </div>

    <script>
      var LV_2_EXP_TO_UP = {
        1:	300,
        2:	600,
        3:	1100,
        4:	1700,
        5:	2300,
        6:	4200,
        7:	6000,
        8:	7350,
        9:	9930,
        10:	11800,
        11:	15600,
        12:	19600,
        13:	23700,
        14:	26400,
        15:	30500,
        16:	35400,
        17:	40500,
        18:	45700,
        19:	51000,
        20:	56600,
        21:	63900,
        22:	71400,
        23:	79100,
        24:	87100,
        25:	95200,
        26:	109800,
        27:	124800,
        28:	140200,
        29:	155900,
        30:	162500,
        31:	175900,
        32:	189600,
        33:	203500,
        34:	217900,
        35:	232320,
        36:	249900,
        37:	267800,
        38:	286200,
        39:	304900,
        40:	324000,
        41:	340200,
        42:	356800,
        43:	373700,
        44:	390800,
        45:	408200,
        46:	437600,
        47:	467500,
        48:	498000,
        49:	529000,
        50:	864000,
        51:	1058400,
        52:	1267200,
        53:	1555200,
        54:	1872000,
        55:	2217600,
        56:	2592000,
        57:	2995200,
        58:	3427200,
        59:	3888000,
        60:	4470000,
        61:	4873000,
        62:	5316000,
        63:	5809000,
        64:	6364000,
        65:	6995000,
        66:	7722000,
        67:	8575000,
        68:	9593000,
        69:	10826000,
        70:	-1,
      }
      var cur_lv_ele = document.getElementById('cur_lv');
      var cur_exp_ele = document.getElementById('cur_exp');
      var target_lv_ele = document.getElementById('target_lv');
      var cal_ele = document.getElementById('cal');
      var result_ele = document.getElementById('result');
      cal_ele.addEventListener('click', ()=>{
        try {
          var cur_lv = parseInt(cur_lv_ele.value);
          var cur_exp = parseInt(cur_exp_ele.value);
          var target_lv = parseInt(target_lv_ele.value);
          // cal
          var need_exp = 0;
          for (var i = cur_lv; i < target_lv; ++i) {
            need_exp += LV_2_EXP_TO_UP[i];
          }
          need_exp -= cur_exp;
          result_ele.textContent = '所需经验: ' + need_exp;
        } catch {
          alert('请在每个输入框中都输入合适的整数')
        }
      });
    </script>
  </body>
</html>